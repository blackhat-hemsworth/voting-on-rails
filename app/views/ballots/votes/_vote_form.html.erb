<div class="nested-form-wrapper" data-new-record="<%= f.object.new_record? %>">
  <div class="column">
    <%= f.label "Vote Topic" %>
    <%= f.text_field :topic %>
  </div>

  <div class="column">
    <%= f.label "Number of selections" %>
    <%= f.number_field :n_selections %>
  </div>

  <div class="centered">
    <div data-controller='nested-form', data-nested_form_wrapper_selector_value='.nested-form-wrapper'>
      <template data-nested-form-target="template">
        <%= f.fields_for :vote_choices, VoteChoice.new, child_index: 'NEW_RECORD' do |choice_fields| %>
          <%= render "ballots/votes/choices/vote_choice_form", f: choice_fields %>
        <% end %>
      </template>

      <%= f.fields_for :vote_choices do |choice_fields| %>
        <%= render "ballots/votes/choices/vote_choice_form", f: choice_fields %>
      <% end %>
      <!-- Inserted elements will be injected before that target. -->
      <div data-nested-form-target="target"></div>

      <button type="button" data-action="nested-form#add">Add choice</button>

    </div>
  </div>

  <button type="button" data-action="nested-form#remove">Remove vote</button>

</div>
